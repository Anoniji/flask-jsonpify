language: python
python:
  - "2.6"
  - "2.7"
  - "3.3"
  - "pypy"

install:
  - "pip install pep8 pyflakes coveralls"

script:
  - "python setup.py test"
  - "pep8 flask_jsonpify.py"

after_success:
  - "coveralls"

deploy:
  provider: pypi
  user: wcdolphin
  password:
    secure: PrKEfSZX/IBwy/1TtocCDVNE9inepYeCoChFQ7MXxC49ytbEjLL8xcv57MSnFgOtMuVxzikjkrplBlDe0+gNtTW8vQQWMg6n2I/rkgI8tIJ+RAwWMBvVDNjtdziBkVlkcfOFHYZ6NHZ1SH/FQ1GCicQF8LSsBnMLJZOJ+RVjs5Q=
  distributions: "sdist bdist_wheel"
  on:
    all_branches: true
    tags: true
    repo: CoryDolphin/flask-jsonpify
    condition: $TRAVIS_PYTHON_VERSION != *2.6* # Ensures we release a 2.7X wheel